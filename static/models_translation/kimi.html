<div class="model-lang-content lang-en hidden">
    <h3 class="text-2xl font-bold mb-4">Master Complex Problem Solving with Kimi-K2</h3>
    <p class="mb-4 text-gray-600 dark:text-gray-300">Kimi-K2 is a frontier reasoning model developed by Moonshot AI, specifically engineered to tackle the most demanding intellectual challenges. Unlike standard models, Kimi-K2 utilizes an advanced internal "thinking" process, allowing it to verify facts and explore multiple logic paths before providing a final answer. This makes it an indispensable tool for scientific research, advanced mathematical proofs, and intricate system architectural design.</p>
    <p class="mb-6 text-gray-600 dark:text-gray-300">By integrating Kimi-K2 via our API, you gain a model that doesn't just generate text, but actively "reasons" through tasks. It actively competes with and often surpasses high-end closed models like o1-preview in complex mathematical benchmarks and coding logic. If your project requires a higher degree of accuracy and a rigorous chain-of-thought, Kimi-K2 is the optimal solution for your high-level intelligent agents.</p>
    <h4 class="text-xl font-bold mb-4 text-primary">Technical Specifications:</h4>
    <div class="overflow-x-auto">
        <table class="w-full text-sm text-left border border-gray-200 dark:border-gray-700">
            <thead class="bg-gray-100 dark:bg-gray-800 uppercase font-bold">
                <tr><th class="px-4 py-3">Feature</th><th class="px-4 py-3">Specification</th></tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                <tr><td class="px-4 py-2 font-semibold">Model Name</td><td class="px-4 py-2">Kimi-K2 (Thinking Model)</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Release Date</td><td class="px-4 py-2">November 6, 2025</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Primary Strength</td><td class="px-4 py-2">Reinforcement Learning-based Reasoning</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Context Window</td><td class="px-4 py-2">128,000 Tokens</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Performance Benchmark</td><td class="px-4 py-2">Competes with o1 in Math & STEM</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Programming</td><td class="px-4 py-2">Advanced System-level Coding & Debugging</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Inference Mode</td><td class="px-4 py-2">Real-time Chain-of-Thought (CoT)</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Multilingual Support</td><td class="px-4 py-2">Comprehensive (Optimized for Arabic/English/Chinese)</td></tr>
            </tbody>
        </table>
    </div>
</div>

<div class="model-lang-content lang-ar hidden">
    <h3 class="text-2xl font-bold mb-4">Ø£ØªÙ‚Ù† Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© Ù…Ø¹ Ù†Ù…ÙˆØ°Ø¬ Kimi-K2</h3>
    <p class="mb-4 text-gray-600 dark:text-gray-300">ÙŠÙØ¹Ø¯ Kimi-K2 Ù†Ù…ÙˆØ°Ø¬Ø§Ù‹ Ø±Ø§Ø¦Ø¯Ø§Ù‹ ÙÙŠ Ù…Ø¬Ø§Ù„ "Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ" Ù…Ù† ØªØ·ÙˆÙŠØ± Moonshot AIØŒ Ø­ÙŠØ« ØªÙ… ØªØµÙ…ÙŠÙ…Ù‡ Ø®ØµÙŠØµØ§Ù‹ Ù„Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„ÙÙƒØ±ÙŠØ© Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹. Ø¹Ù„Ù‰ Ø¹ÙƒØ³ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©ØŒ ÙŠØ³ØªØ®Ø¯Ù… Kimi-K2 Ø¹Ù…Ù„ÙŠØ© "ØªÙÙƒÙŠØ±" Ø¯Ø§Ø®Ù„ÙŠØ© Ù…ØªØ·ÙˆØ±Ø© ØªØªÙŠØ­ Ù„Ù‡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚Ø§Ø¦Ù‚ ÙˆØ§Ø³ØªÙƒØ´Ø§Ù Ù…Ø³Ø§Ø±Ø§Øª Ù…Ù†Ø·Ù‚ÙŠØ© Ù…ØªØ¹Ø¯Ø¯Ø© Ù‚Ø¨Ù„ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©. Ù‡Ø°Ø§ ÙŠØ¬Ø¹Ù„Ù‡ Ø£Ø¯Ø§Ø© Ù„Ø§ ØºÙ†Ù‰ Ø¹Ù†Ù‡Ø§ ÙÙŠ Ø§Ù„Ø£Ø¨Ø­Ø§Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠØ©ØŒ Ø§Ù„Ø¨Ø±Ø§Ù‡ÙŠÙ† Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©ØŒ ÙˆØªØµÙ…ÙŠÙ…Ø§Øª Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©.</p>
    <p class="mb-6 text-gray-600 dark:text-gray-300">Ù…Ù† Ø®Ù„Ø§Ù„ Ø¯Ù…Ø¬ Kimi-K2 Ø¹Ø¨Ø± Ø§Ù„Ù€ API Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù…ÙˆØ°Ø¬ Ù„Ø§ ÙŠÙƒØªÙÙŠ Ø¨ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†ØµÙˆØµ ÙØ­Ø³Ø¨ØŒ Ø¨Ù„ "ÙŠÙÙƒØ±" Ø¨Ø¹Ù…Ù‚ ÙÙŠ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø³Ù†Ø¯Ø© Ø¥Ù„ÙŠÙ‡. ÙŠÙ†Ø§ÙØ³ Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù‚ÙˆØ© ÙˆÙŠØªÙÙˆÙ‚ Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…ØºÙ„Ù‚Ø© Ø§Ù„Ø±Ø§Ø¦Ø¯Ø© Ù…Ø«Ù„ o1-preview ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© ÙˆÙ…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©. Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø´Ø±ÙˆØ¹Ùƒ ÙŠØªØ·Ù„Ø¨ Ø¯Ø±Ø¬Ø© Ø¹Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø¯Ù‚Ø© ÙˆØªØ³Ù„Ø³Ù„Ø§Ù‹ Ù…Ù†Ø·Ù‚ÙŠØ§Ù‹ ØµØ§Ø±Ù…Ø§Ù‹ØŒ ÙØ¥Ù† Kimi-K2 Ù‡Ùˆ Ø§Ù„Ø­Ù„ Ø§Ù„Ø£Ù…Ø«Ù„ Ù„Ø¨Ù†Ø§Ø¡ ÙˆÙƒÙ„Ø§Ø¡ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù† Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¹Ù„ÙŠØ§.</p>
    <h4 class="text-xl font-bold mb-4 text-primary">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ÙÙ†ÙŠØ©:</h4>
    <div class="overflow-x-auto">
        <table class="w-full text-sm text-right border border-gray-200 dark:border-gray-700">
            <thead class="bg-gray-100 dark:bg-gray-800 uppercase font-bold">
                <tr><th class="px-4 py-3">Ø§Ù„Ù…ÙŠØ²Ø©</th><th class="px-4 py-3">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th></tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                <tr><td class="px-4 py-2 font-semibold">Ø§Ø³Ù… Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</td><td class="px-4 py-2">Kimi-K2 (Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ)</td></tr>
                <tr><td class="px-4 py-2 font-semibold">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±</td><td class="px-4 py-2">6 Ù†ÙˆÙÙ…Ø¨Ø± 2025</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Ù†Ù‚Ø·Ø© Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</td><td class="px-4 py-2">Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø¹Ø²Ø² (RL)</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Ù†Ø§ÙØ°Ø© Ø§Ù„Ø³ÙŠØ§Ù‚</td><td class="px-4 py-2">128,000 ØªÙˆÙƒÙ†</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯Ø§Ø¡</td><td class="px-4 py-2">ÙŠÙ†Ø§ÙØ³ Ù†Ù…ÙˆØ°Ø¬ o1 ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… (STEM)</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©</td><td class="px-4 py-2">Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Ù†Ù…Ø· Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</td><td class="px-4 py-2">Ø³Ù„Ø³Ù„Ø© Ø£ÙÙƒØ§Ø± (CoT) ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ</td></tr>
                <tr><td class="px-4 py-2 font-semibold">Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØ§Øª</td><td class="px-4 py-2">Ø´Ø§Ù…Ù„ (Ù…Ø­Ø³Ù† Ù„Ù„ØºØ§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ ÙˆØ§Ù„ØµÙŠÙ†ÙŠØ©)</td></tr>
            </tbody>
        </table>
    </div>
</div>

<script type="application/json" id="model-specific-config">
[
    { 
        "id": "stream", "type": "toggle", "val": true,
        "label_en": "Stream Response", "label_ar": "Ø§Ù„Ø¨Ø« Ø§Ù„Ø­ÙŠ (Stream)",
        "desc_en": "Enable: See results instantly.", "desc_ar": "ØªÙØ¹ÙŠÙ„: Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙÙˆØ± ØªÙˆÙ„ÙŠØ¯Ù‡Ø§."
    },
    { 
        "id": "temperature", "type": "slider", "min": 0, "max": 1, "step": 0.01, "val": 1.0,
        "label_en": "Temperature", "label_ar": "Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©",
        "desc_en": "Controls randomness. 1.0 is standard for Kimi.",
        "desc_ar": "ÙŠØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©. Ø§Ù„Ù‚ÙŠÙ…Ø© 1.0 Ù‡ÙŠ Ø§Ù„Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ù…ØªÙˆØ§Ø²Ù† Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬."
    },
    { 
        "id": "max_tokens", "type": "slider", "min": 1, "max": 16384, "step": 128, "val": 4096,
        "label_en": "Max Tokens", "label_ar": "Ø£Ù‚ØµÙ‰ Ø·ÙˆÙ„ (ÙƒØ¨ÙŠØ±)",
        "desc_en": "Kimi supports very long outputs.", "desc_ar": "ÙŠØ¯Ø¹Ù… Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø¬Ø¯Ø§Ù‹ ÙˆÙ…ÙØµÙ„Ø©."
    }
]
</script>

<script>
    // ğŸ”¥ Updated to accept 'userSignal'
    window.modelSpecificChatHandler = async function(msg, uiModelId, params, chatBox, loadingDiv, userSignal) {
        const useStream = params.stream;
        if(loadingDiv) loadingDiv.remove();

        const botMsgId = `bot-${Date.now()}`;
        const thinkId = `think-${Date.now()}`;

        const botDiv = document.createElement('div');
        botDiv.className = "flex w-full mt-2 space-x-3 max-w-full";
        // ğŸ”¥ FIXED LABEL: "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±..." only
        botDiv.innerHTML = `
            <div class="chat-bubble bot">
                <div class="think-box">
                    <div class="think-header" onclick="toggleThinkBox('${thinkId}')">
                        <i id="${thinkId}-icon" class="fa-solid fa-circle-notch think-spinner text-primary"></i> 
                        <span id="${thinkId}-label">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...</span>
                    </div>
                    <div id="think-content-${thinkId}" class="think-content hidden-content"></div>
                </div>
                <div id="${botMsgId}-text" class="whitespace-pre-wrap"></div>
            </div>`;
        chatBox.appendChild(botDiv);
        chatBox.scrollTop = chatBox.scrollHeight;

        const thinkContentEl = document.getElementById(`think-content-${thinkId}`);
        const textContentEl = document.getElementById(`${botMsgId}-text`);
        const thinkIcon = document.getElementById(`${thinkId}-icon`);
        const thinkLabel = document.getElementById(`${thinkId}-label`);

        let fullThinking = "";
        let fullContent = "";

        const finishThinking = () => {
             thinkIcon.classList.remove('fa-circle-notch', 'think-spinner', 'text-primary');
             thinkIcon.classList.add('fa-check', 'text-green-500');
             thinkLabel.textContent = "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªÙÙƒÙŠØ±";
        };

        const body = { message: msg, model_id: uiModelId, ...params };

        // ğŸ”¥ Pass userSignal to fetch
        const response = await fetch('/api/chat', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(body),
            signal: userSignal
        });

        if (useStream && response.body) {
            const reader = response.body.getReader();
            const decoder = new TextDecoder();
            while (true) {
                const { done, value } = await reader.read();
                if (done) break;
                const chunk = decoder.decode(value, { stream: true });
                const lines = chunk.split('\n');
                for (const line of lines) {
                    if (line.startsWith('data: ')) {
                        const jsonStr = line.slice(6);
                        if (jsonStr === '[DONE]') break;
                        try {
                            const data = JSON.parse(jsonStr);
                            const delta = data.choices[0].delta || {};

                            if (delta.reasoning_content) {
                                fullThinking += delta.reasoning_content;
                                thinkContentEl.textContent = fullThinking;
                            } else if (delta.content) {
                                finishThinking();
                                fullContent += delta.content;
                                textContentEl.textContent = fullContent;
                            }
                        } catch(e){}
                    }
                }
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        } else {
            const data = await response.json();
            finishThinking();
            textContentEl.textContent = data.choices[0].message.content;
        }
        finishThinking();
    };
</script>